from typing import TypedDict

# Global round/game pacing
DEFAULT_TICK_RATE: int = 20
PREP_SECONDS: float = 20.0
COMBAT_SECONDS: float = 120.0

PLAYER_A: str = "A"
PLAYER_B: str = "B"

# Networking/round sync
ROUND_ACK_TIMEOUT: float = 120.0

# Player economy
PLAYER_LIVES: int = 20
START_GOLD: int = 50
GOLD_PER_KILL: int = 1


class UnitStats(TypedDict):
    cost: int
    health: int
    speed: float


class TowerStats(TypedDict):
    cost: int
    damage: int
    range_px: float
    cooldown_ticks: int


UNIT_STATS: dict[str, UnitStats] = {
    "standard": {
        "cost": 5,
        "health": 50,
        "speed": 120.0,
    },
}

TOWER_STATS: dict[str, TowerStats] = {
    "standard": {
        "cost": 20,
        "damage": 25,
        "range_px": 120.0,
        "cooldown_ticks": 10,
    },
}

# Map geometry and paths

# Tile size in pixels (used by both server and client)
TILE_SIZE_PX = 40

# Map dimensions
MAP_WIDTH_TILES = 46

# Build zone boundaries (columns, inclusive)
ZONE_BOUNDARY_LEFT = 21
ZONE_BOUNDARY_RIGHT = 24


def tile_to_pixel(row: int, col: int) -> tuple[float, float]:
    """Convert tile coordinates (row, col) to pixel coordinates (x, y).

    Args:
        row: Row index (0-based)
        col: Column index (0-based)

    Returns:
        Tuple of (x, y) pixel coordinates
    """
    return (float(col * TILE_SIZE_PX), float(row * TILE_SIZE_PX))


GAME_PATHS = {
    "A": {
        1: [
            (1, 24),
            (1, 25),
            (1, 26),
            (1, 27),
            (1, 28),
            (1, 29),
            (1, 30),
            (1, 31),
            (1, 32),
            (1, 33),
            (1, 34),
            (1, 35),
            (1, 36),
            (1, 37),
            (1, 38),
            (1, 39),
            (1, 40),
            (1, 41),
            (1, 42),
            (1, 43),
            (2, 43),
            (3, 43),
            (4, 43),
            (5, 43),
            (6, 43),
            (7, 43),
            (8, 43),
            (9, 43),
            (10, 43),
        ],
        2: [
            (7, 24),
            (7, 25),
            (7, 26),
            (7, 27),
            (7, 28),
            (7, 29),
            (7, 30),
            (7, 31),
            (7, 32),
            (6, 32),
            (5, 32),
            (4, 32),
            (3, 32),
            (2, 32),
            (1, 32),
            (1, 33),
            (1, 34),
            (1, 35),
            (1, 36),
            (1, 37),
            (1, 38),
            (1, 39),
            (1, 40),
            (1, 41),
            (1, 42),
            (1, 43),
            (2, 43),
            (3, 43),
            (4, 43),
            (5, 43),
            (6, 43),
            (7, 43),
            (8, 43),
            (9, 43),
            (10, 43),
        ],
        3: [
            (11, 24),
            (11, 25),
            (11, 26),
            (11, 27),
            (11, 28),
            (11, 29),
            (10, 29),
            (10, 30),
            (10, 31),
            (10, 32),
            (11, 32),
            (12, 32),
            (13, 32),
            (13, 33),
            (13, 34),
            (13, 35),
            (13, 36),
            (12, 36),
            (11, 36),
            (11, 37),
            (11, 38),
            (11, 39),
            (11, 40),
            (12, 40),
            (13, 40),
            (13, 41),
            (13, 42),
            (13, 43),
            (12, 43),
        ],
        4: [
            (16, 24),
            (16, 25),
            (16, 26),
            (16, 27),
            (16, 28),
            (16, 29),
            (16, 30),
            (16, 31),
            (16, 32),
            (16, 33),
            (16, 34),
            (16, 35),
            (16, 36),
            (16, 37),
            (17, 37),
            (18, 37),
            (19, 37),
            (20, 37),
            (21, 37),
            (22, 37),
            (23, 37),
            (23, 38),
            (23, 39),
            (23, 40),
            (23, 41),
            (23, 42),
            (23, 43),
            (22, 43),
            (21, 43),
            (20, 43),
            (19, 43),
            (18, 43),
            (17, 43),
            (16, 43),
            (15, 43),
            (14, 43),
            (13, 43),
            (12, 43),
        ],
        5: [
            (23, 24),
            (23, 25),
            (23, 26),
            (23, 27),
            (23, 28),
            (23, 29),
            (23, 30),
            (23, 31),
            (23, 32),
            (23, 33),
            (23, 34),
            (23, 35),
            (23, 36),
            (23, 37),
            (23, 38),
            (23, 39),
            (23, 40),
            (23, 41),
            (23, 42),
            (23, 43),
            (22, 43),
            (21, 43),
            (20, 43),
            (19, 43),
            (18, 43),
            (17, 43),
            (16, 43),
            (15, 43),
            (14, 43),
            (13, 43),
            (12, 43),
        ],
    },
    "B": {
        1: [
            (1, 21),
            (1, 20),
            (1, 19),
            (1, 18),
            (1, 17),
            (1, 16),
            (1, 15),
            (1, 14),
            (1, 13),
            (1, 12),
            (1, 11),
            (1, 10),
            (1, 9),
            (1, 8),
            (1, 7),
            (1, 6),
            (1, 5),
            (1, 4),
            (1, 3),
            (1, 2),
            (2, 2),
            (3, 2),
            (4, 2),
            (5, 2),
            (6, 2),
            (7, 2),
            (8, 2),
            (9, 2),
            (10, 2),
        ],
        2: [
            (7, 21),
            (7, 20),
            (7, 19),
            (7, 18),
            (7, 17),
            (7, 16),
            (7, 15),
            (7, 14),
            (7, 13),
            (6, 13),
            (5, 13),
            (4, 13),
            (3, 13),
            (2, 13),
            (1, 13),
            (1, 12),
            (1, 11),
            (1, 10),
            (1, 9),
            (1, 8),
            (1, 7),
            (1, 6),
            (1, 5),
            (1, 4),
            (1, 3),
            (1, 2),
            (2, 2),
            (3, 2),
            (4, 2),
            (5, 2),
            (6, 2),
            (7, 2),
            (8, 2),
            (9, 2),
            (10, 2),
        ],
        3: [
            (11, 21),
            (11, 20),
            (11, 19),
            (11, 18),
            (11, 17),
            (11, 16),
            (10, 16),
            (10, 15),
            (10, 14),
            (10, 13),
            (11, 13),
            (12, 13),
            (13, 13),
            (13, 12),
            (13, 11),
            (13, 10),
            (13, 9),
            (12, 9),
            (11, 9),
            (11, 8),
            (11, 7),
            (11, 6),
            (11, 5),
            (12, 5),
            (13, 5),
            (13, 4),
            (13, 3),
            (13, 2),
            (12, 2),
        ],
        4: [
            (16, 21),
            (16, 20),
            (16, 19),
            (16, 18),
            (16, 17),
            (16, 16),
            (16, 15),
            (16, 14),
            (16, 13),
            (16, 12),
            (16, 11),
            (16, 10),
            (16, 9),
            (16, 8),
            (17, 8),
            (18, 8),
            (19, 8),
            (20, 8),
            (21, 8),
            (22, 8),
            (23, 8),
            (23, 7),
            (23, 6),
            (23, 5),
            (23, 4),
            (23, 3),
            (23, 2),
            (22, 2),
            (21, 2),
            (20, 2),
            (19, 2),
            (18, 2),
            (17, 2),
            (16, 2),
            (15, 2),
            (14, 2),
            (13, 2),
            (12, 2),
        ],
        5: [
            (23, 21),
            (23, 20),
            (23, 19),
            (23, 18),
            (23, 17),
            (23, 16),
            (23, 15),
            (23, 14),
            (23, 13),
            (23, 12),
            (23, 11),
            (23, 10),
            (23, 9),
            (23, 8),
            (23, 7),
            (23, 6),
            (23, 5),
            (23, 4),
            (23, 3),
            (23, 2),
            (22, 2),
            (21, 2),
            (20, 2),
            (19, 2),
            (18, 2),
            (17, 2),
            (16, 2),
            (15, 2),
            (14, 2),
            (13, 2),
            (12, 2),
        ],
    },
}
